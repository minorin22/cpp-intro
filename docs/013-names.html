<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>名前 | 江添亮のC++入門</title>
    <meta name="description" content="">
    <link rel="icon" href="64.png">
    <script>
        MathJax = {
            chtml: {
                matchFontHeight: false
            },
            tex: {
                inlineMath: [['$', '$']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="152.png">
  <meta name="msapplication-TileImage" content="/144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="assets/css/0.styles.17f32d1e.css" as="style"><link rel="preload" href="assets/js/app.8620998f.js" as="script"><link rel="preload" href="assets/js/2.7009e9ba.js" as="script"><link rel="preload" href="assets/js/18.468131c1.js" as="script"><link rel="prefetch" href="assets/js/10.0bc4fb9f.js"><link rel="prefetch" href="assets/js/11.c5d46ffe.js"><link rel="prefetch" href="assets/js/12.cec763ba.js"><link rel="prefetch" href="assets/js/13.85764695.js"><link rel="prefetch" href="assets/js/14.56c0c5a1.js"><link rel="prefetch" href="assets/js/15.ba58285d.js"><link rel="prefetch" href="assets/js/16.663fe3ce.js"><link rel="prefetch" href="assets/js/17.b9e53cc4.js"><link rel="prefetch" href="assets/js/19.966431ea.js"><link rel="prefetch" href="assets/js/20.39088cad.js"><link rel="prefetch" href="assets/js/21.f1d2fbe4.js"><link rel="prefetch" href="assets/js/22.53af9436.js"><link rel="prefetch" href="assets/js/23.45c08f75.js"><link rel="prefetch" href="assets/js/24.fec53f63.js"><link rel="prefetch" href="assets/js/25.1c55ab94.js"><link rel="prefetch" href="assets/js/26.97221aa1.js"><link rel="prefetch" href="assets/js/27.ad617385.js"><link rel="prefetch" href="assets/js/28.1d1956f2.js"><link rel="prefetch" href="assets/js/29.bb17ac3f.js"><link rel="prefetch" href="assets/js/3.a3b2b660.js"><link rel="prefetch" href="assets/js/30.3861fe0d.js"><link rel="prefetch" href="assets/js/31.93e5e7a5.js"><link rel="prefetch" href="assets/js/32.7f1f5a03.js"><link rel="prefetch" href="assets/js/33.ba1ef509.js"><link rel="prefetch" href="assets/js/34.63b70d43.js"><link rel="prefetch" href="assets/js/35.2cf21250.js"><link rel="prefetch" href="assets/js/36.93604af5.js"><link rel="prefetch" href="assets/js/37.132be8e6.js"><link rel="prefetch" href="assets/js/38.32a3f051.js"><link rel="prefetch" href="assets/js/39.bab7cf23.js"><link rel="prefetch" href="assets/js/4.3ff2fe10.js"><link rel="prefetch" href="assets/js/40.2cd9628c.js"><link rel="prefetch" href="assets/js/41.24bfe547.js"><link rel="prefetch" href="assets/js/42.39ebe085.js"><link rel="prefetch" href="assets/js/43.4ff95f43.js"><link rel="prefetch" href="assets/js/44.f1a016d7.js"><link rel="prefetch" href="assets/js/45.590d3d64.js"><link rel="prefetch" href="assets/js/46.46b99b9b.js"><link rel="prefetch" href="assets/js/47.483b5213.js"><link rel="prefetch" href="assets/js/48.65facf6a.js"><link rel="prefetch" href="assets/js/49.2bda166c.js"><link rel="prefetch" href="assets/js/5.7f8f4812.js"><link rel="prefetch" href="assets/js/50.858dc861.js"><link rel="prefetch" href="assets/js/51.a40bec0a.js"><link rel="prefetch" href="assets/js/52.f5dc4f7e.js"><link rel="prefetch" href="assets/js/53.4cfac598.js"><link rel="prefetch" href="assets/js/54.9b6224cf.js"><link rel="prefetch" href="assets/js/55.4fb7a3ba.js"><link rel="prefetch" href="assets/js/56.8a7823a6.js"><link rel="prefetch" href="assets/js/6.af1283dd.js"><link rel="prefetch" href="assets/js/7.401cafeb.js"><link rel="prefetch" href="assets/js/8.44430c93.js"><link rel="prefetch" href="assets/js/9.39e986e2.js">
    <link rel="stylesheet" href="assets/css/0.styles.17f32d1e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="index.html" class="home-link router-link-active"><!----> <span class="site-name">江添亮のC++入門</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="000-preface.html" class="sidebar-link">序</a></li><li><a href="001-intro.html" class="sidebar-link">C++の概要</a></li><li><a href="002-build.html" class="sidebar-link">C++の実行</a></li><li><a href="003-guide-to-c++.html" class="sidebar-link">C++ヒッチハイクガイド</a></li><li><a href="004-debug-compile-error.html" class="sidebar-link">デバッグ：コンパイルエラーメッセージの読み方</a></li><li><a href="005-the-restaurant-at-the-end-of-the-branch.html" class="sidebar-link">条件分岐の果てのレストラン</a></li><li><a href="006-debug-compile-warning.html" class="sidebar-link">デバッグ: コンパイル警告メッセージ</a></li><li><a href="007-standard-input.html" class="sidebar-link">最近体重が気になるあなたのための標準入力</a></li><li><a href="008-loop.html" class="sidebar-link">ループ</a></li><li><a href="009-vector.html" class="sidebar-link">メモリーを無限に確保する</a></li><li><a href="010-debug-printf.html" class="sidebar-link">デバッグ：printfデバッグ</a></li><li><a href="011-integer.html" class="sidebar-link">整数</a></li><li><a href="012-floating-point.html" class="sidebar-link">浮動小数点数</a></li><li><a href="013-names.html" class="active sidebar-link">名前</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="013-names.html#キーワード" class="sidebar-link">キーワード</a></li><li class="sidebar-sub-header"><a href="013-names.html#名前に使える文字" class="sidebar-link">名前に使える文字</a></li><li class="sidebar-sub-header"><a href="013-names.html#宣言と定義" class="sidebar-link">宣言と定義</a></li><li class="sidebar-sub-header"><a href="013-names.html#名前空間" class="sidebar-link">名前空間</a></li><li class="sidebar-sub-header"><a href="013-names.html#型名" class="sidebar-link">型名</a></li><li class="sidebar-sub-header"><a href="013-names.html#スコープ" class="sidebar-link">スコープ</a></li></ul></li><li><a href="014-iterator.html" class="sidebar-link">イテレーターの基礎</a></li><li><a href="015-reference.html" class="sidebar-link">lvalueリファレンスとconst</a></li><li><a href="016-algorithm.html" class="sidebar-link">アルゴリズム</a></li><li><a href="017-lambda.html" class="sidebar-link">ラムダ式</a></li><li><a href="018-class.html" class="sidebar-link">クラスの基本</a></li><li><a href="019-operator-overloading.html" class="sidebar-link">より自然に振る舞うクラス</a></li><li><a href="020-array.html" class="sidebar-link">std::array</a></li><li><a href="021-three-virtues-of-a-programmer.html" class="sidebar-link">プログラマーの三大美徳</a></li><li><a href="022-implement-array.html" class="sidebar-link">配列</a></li><li><a href="023-template.html" class="sidebar-link">テンプレート</a></li><li><a href="024-more-array.html" class="sidebar-link">arrayをさらに実装</a></li><li><a href="025-array-iterator.html" class="sidebar-link">arrayのイテレーター</a></li><li><a href="026-exception.html" class="sidebar-link">傲慢なエラー処理: 例外</a></li><li><a href="027-pointer.html" class="sidebar-link">ポインター</a></li><li><a href="028-pointer-semantics.html" class="sidebar-link">意味上のポインター</a></li><li><a href="029-pointer-syntax.html" class="sidebar-link">文法上のポインター</a></li><li><a href="030-pointer-details.html" class="sidebar-link">ポインターの内部実装</a></li><li><a href="031-iterator-operations.html" class="sidebar-link">イテレーター詳細</a></li><li><a href="032-memory-allocation.html" class="sidebar-link">動的メモリー確保</a></li><li><a href="033-vector-implementation.html" class="sidebar-link">vectorの実装 : 基礎</a></li><li><a href="034-vector-memory-allocation.html" class="sidebar-link">vectorの実装 : メモリー確保</a></li><li><a href="035-copy.html" class="sidebar-link">コピー</a></li><li><a href="036-move.html" class="sidebar-link">ムーブ</a></li><li><a href="037-rvalue-reference.html" class="sidebar-link">rvalueリファレンス</a></li><li><a href="038-move-semantics.html" class="sidebar-link">ムーブの実装</a></li><li><a href="039-disable-copy.html" class="sidebar-link">コピーの禁止</a></li><li><a href="040-smart-pointer.html" class="sidebar-link">スマートポインター</a></li><li><a href="041-move-support.html" class="sidebar-link">自作の数値クラスで演算をムーブに対応する方法</a></li><li><a href="042-string-intro.html" class="sidebar-link">文字列</a></li><li><a href="043-random.html" class="sidebar-link">乱数</a></li><li><a href="044-random-part2.html" class="sidebar-link">ポアソン分布</a></li><li><a href="045-random-part3.html" class="sidebar-link">正規分布</a></li><li><a href="046-random-part4.html" class="sidebar-link">サンプリング分布(sampling distributions)</a></li><li><a href="200-cpp.html" class="sidebar-link">Cプリプロセッサー</a></li><li><a href="300-multiple-source-files.html" class="sidebar-link">分割コンパイル</a></li><li><a href="400-gdb.html" class="sidebar-link">デバッガー</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="名前"><a href="013-names.html#名前" class="header-anchor">#</a> 名前</h1> <p>プログラミング言語C++にはさまざまな名前が出てくる。変数、関数、型など、さまざまなものに名前が付いている。この章では名前について学ぶ。</p> <h2 id="キーワード"><a href="013-names.html#キーワード" class="header-anchor">#</a> キーワード</h2> <p>一部の名前はキーワードとして予約され、特別な意味を持つ。キーワードは名前として使うことができない。</p> <p>キーワードの一覧は以下のとおり。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">alignas</span>         <span class="token keyword">alignof</span>     <span class="token keyword">asm</span>         <span class="token keyword">auto</span>        <span class="token keyword">bool</span>            <span class="token keyword">break</span>
<span class="token keyword">case</span>            <span class="token keyword">catch</span>       <span class="token keyword">char</span>        <span class="token keyword">char16_t</span>    <span class="token keyword">char32_t</span>        <span class="token keyword">class</span>
<span class="token class-name">concept</span>         <span class="token keyword">const</span>       <span class="token keyword">constexpr</span>   <span class="token keyword">const_cast</span>  <span class="token keyword">continue</span>        <span class="token keyword">decltype</span>
<span class="token keyword">default</span>         <span class="token keyword">delete</span>      <span class="token keyword">do</span>          <span class="token keyword">double</span>      <span class="token keyword">dynamic_cast</span>    <span class="token keyword">else</span>
<span class="token keyword">enum</span>            <span class="token class-name">explicit</span>    <span class="token keyword">export</span>      <span class="token keyword">extern</span>      <span class="token boolean">false</span>           <span class="token keyword">float</span>
<span class="token keyword">for</span>             <span class="token keyword">friend</span>      <span class="token keyword">goto</span>        <span class="token keyword">if</span>          <span class="token keyword">inline</span>          <span class="token keyword">int</span>
<span class="token keyword">long</span>            <span class="token keyword">mutable</span>     <span class="token keyword">namespace</span>   <span class="token keyword">new</span>         <span class="token keyword">noexcept</span>        <span class="token keyword">nullptr</span>
<span class="token keyword">operator</span>        <span class="token keyword">private</span>     <span class="token keyword">protected</span>   <span class="token keyword">public</span>      <span class="token keyword">register</span>        <span class="token keyword">reinterpret_cast</span>
requires        <span class="token keyword">return</span>      <span class="token keyword">short</span>       <span class="token keyword">signed</span>      <span class="token keyword">sizeof</span>          <span class="token keyword">static</span>
<span class="token keyword">static_assert</span>   <span class="token keyword">static_cast</span> <span class="token keyword">struct</span>      <span class="token class-name">switch</span>      <span class="token keyword">template</span>        <span class="token keyword">this</span>
<span class="token keyword">thread_local</span>    <span class="token keyword">throw</span>       <span class="token boolean">true</span>        <span class="token keyword">try</span>         <span class="token keyword">typedef</span>         <span class="token keyword">typeid</span>
<span class="token keyword">typename</span>        <span class="token keyword">union</span>       <span class="token keyword">unsigned</span>    <span class="token keyword">using</span>       <span class="token keyword">virtual</span>         <span class="token keyword">void</span>
<span class="token keyword">volatile</span>        <span class="token keyword">wchar_t</span>     <span class="token keyword">while</span>
</code></pre></div><h2 id="名前に使える文字"><a href="013-names.html#名前に使える文字" class="header-anchor">#</a> 名前に使える文字</h2> <p>名前というのは根本的には識別子と呼ばれる文字列で成り立っている。</p> <p>C++では識別子にラテンアルファベット小文字、大文字、アラビア数字、アンダースコア、を使うことができる。以下がその文字の一覧だ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>a b c d e f g h i j k l m
n o p q r s t u v w x y z
A B C D E F G H I J K L M
N O P Q R S T U V W X Y Z
<span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span>
_
</code></pre></div><p>小文字と大文字は区別される。名前<code>a</code>と名前<code>A</code>は別の名前だ。</p> <p>ただし、名前はアラビア数字で始まってはならない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token number">123</span>abc <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token comment">// エラー</span>
</code></pre></div><p>名前にダブルアンダースコア(<code>__</code>)が含まれているものは予約されているので使ってはならない。ダブルアンダースコアとはアンダースコア文字が2つ連続したものをいう。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 使ってはならない</span>
<span class="token comment">// すべてダブルアンダースコアを含む</span>
<span class="token keyword">int</span> __ <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword">int</span> a__ <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword">int</span> __a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
</code></pre></div><p>アンダースコアに大文字から始まる名前も予約されているので使ってはならない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 使ってはならない</span>
<span class="token comment">// アンダースコアに大文字から始まる</span>
<span class="token keyword">int</span> _A <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
</code></pre></div><p>アンダースコアに小文字から始まる名前もグローバル名前空間で予約されているので使ってはならない。グローバル名前空間についてはこのあと説明する。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 使ってはならない</span>
<span class="token comment">// アンダースコアに小文字から始まる</span>
<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
</code></pre></div><p>予約されているというのは、C++コンパイラーがその名前をC++の実装のために使うかもしれないということだ。例えばC++コンパイラーは<code>_A</code>という名前を特別な意味を持つものとして使うかもしれないし、その名前の変数や関数をプログラムに追加するかもしれない。</p> <h2 id="宣言と定義"><a href="013-names.html#宣言と定義" class="header-anchor">#</a> 宣言と定義</h2> <p>C++では、名前は使う前に宣言しなければならない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token comment">// 宣言</span>
    x <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token comment">// 使用</span>
<span class="token punctuation">}</span>
</code></pre></div><p>宣言する前に使うことはできない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// エラー、名前xは宣言されていない。</span>
    x <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> 

    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>C++では多くの名前は宣言と定義に分かれている。宣言と定義の分離は関数が一番わかりやすい。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 関数の宣言</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token punctuation">;</span>

<span class="token comment">// 関数の定義</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token comment">// 宣言部分</span>
<span class="token comment">// 定義部分</span>
<span class="token comment">// 関数の本体</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>関数の定義は宣言を兼ねる。</p> <p>宣言は何度でも書くことができる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 初出</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><p>定義はプログラム中に一度しか書くことができない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 定義</span>
<span class="token keyword">int</span> <span class="token function">odr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// エラー、定義の重複</span>
<span class="token keyword">int</span> <span class="token function">odr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>名前を使うのに事前に必要なのは宣言だ。定義は名前を使ったあとに書いてもよい。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 宣言</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span> <span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定義</span>
<span class="token keyword">int</span> <span class="token function">plus_one</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ほとんどの変数は宣言と定義が同時に行われる。変数でも宣言と定義を分割して行う方法もあるのだが、解説は分割コンパイルの章で行う。</p> <h2 id="名前空間"><a href="013-names.html#名前空間" class="header-anchor">#</a> 名前空間</h2> <p>本書をここまで読んだ読者は、一部の型名の記述が少し変なことに気が付いているだろう。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>string a <span class="token punctuation">;</span>
std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> b <span class="token punctuation">;</span>
</code></pre></div><p>コロンやアングルブラケットは名前に使える文字ではない。信じられない読者は試してみるとよい。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// エラー</span>
<span class="token keyword">int</span> <span class="token operator">::</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
</code></pre></div><p>莫大なエラーが表示されるだろうが、すでに学んだようにとてもいいことだ。コンパイラーが間違いを見つけてくれたのだから。わからないことがあったらどんどんコンパイルエラーを出すとよい。</p> <p>実は<code>std</code>というのは名前空間(namespace)の名前だ。ダブルコロン(<code>::</code>)は名前空間を指定する文法だ。</p> <p>名前空間の文法は以下のとおり。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
<span class="token comment">// コード</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間の中の名前を参照するには<code>::</code>を使う。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ns<span class="token operator">::</span>name <span class="token punctuation">;</span>
</code></pre></div><p>名前空間の中には変数も書ける。この変数は関数の内部に限定されたローカル変数とは違い、どの関数からでも参照できる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
    <span class="token keyword">int</span> name<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> ns<span class="token operator">::</span>name <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ns<span class="token operator">::</span>name <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間の中で宣言された名前は、名前空間を指定しなければ使えなくなる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ns<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// エラー</span>
<span class="token punctuation">}</span>
</code></pre></div><p>異なる名前空間名の下の名前は別の名前になる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> a <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">namespace</span> b <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    a<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 0</span>
    b<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>これだけを見ると、名前空間というのはわざわざ名前空間名を指定しなければ使えない面倒な機能に見えるだろう。名前空間の価値は複数人で同じプログラムのソースファイルを編集するときに出てくる。</p> <p>例えば、アリスとボブがプログラムを共同で開発しているとする。あるプログラムのソースファイル<code>f</code>という名前の関数を書いたとする。ここで、同じプログラムを共同開発している他人も<code>f</code>という名前の関数を書いたらどうなるか。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// アリスの書いた関数f</span>
<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// ボブの書いた関数f</span>
<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>すでに宣言と定義で学んだように、このコードはエラーになる。なぜならば、同じ名前に対して定義が2つあるからだ。</p> <p>名前空間なしでこの問題を解決するためはに、アリスとボブが事前に申し合わせて、名前が衝突しないように調整する必要がある。</p> <p>しかし名前空間があるC++では、そのような面倒な調整は必要がない。アリスとボブが別の名前空間を使えばいいのだ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// アリスの名前空間</span>
<span class="token keyword">namespace</span> alice <span class="token punctuation">{</span>
    <span class="token comment">// アリスの書いた関数f</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ボブの名前空間</span>
<span class="token keyword">namespace</span> bob <span class="token punctuation">{</span>
    <span class="token comment">// ボブの書いた関数f</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>alice::f</code>と<code>bob::f</code>は別の名前なので定義の衝突は起こらない。</p> <h3 id="グローバル名前空間"><a href="013-names.html#グローバル名前空間" class="header-anchor">#</a> グローバル名前空間</h3> <p>名前空間に包まれていないソースファイルのトップレベルの場所は、実はグローバル名前空間(global name space)という名前のない名前空間で包まれているという扱いになっている。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// グローバル名前空間</span>
<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 0</span>
    ns<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>グローバル名前空間は名前の指定のない単なる<code>::</code>で指定することもできる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> x <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    x <span class="token punctuation">;</span> <span class="token comment">// ::xと同じ</span>
    <span class="token operator">::</span>x <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>すでに名前空間の中では変数を宣言できることは学んだ。グローバル名前空間は名前空間なので同じように変数を宣言できる。</p> <p><code>main</code>関数はグローバル名前空間に存在しなければならない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// グローバル名前空間</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="名前空間のネスト"><a href="013-names.html#名前空間のネスト" class="header-anchor">#</a> 名前空間のネスト</h3> <p>名前空間の中に名前空間を書くことができる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> A <span class="token punctuation">{</span> <span class="token keyword">namespace</span> B <span class="token punctuation">{</span> <span class="token keyword">namespace</span> C <span class="token punctuation">{</span>
    <span class="token keyword">int</span> name <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    A<span class="token operator">::</span>B<span class="token operator">::</span>C<span class="token operator">::</span>name <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間のネストは省略して書くこともできる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> A<span class="token operator">::</span>B<span class="token operator">::</span>C <span class="token punctuation">{</span>
    <span class="token keyword">int</span> name <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    A<span class="token operator">::</span>B<span class="token operator">::</span>C<span class="token operator">::</span>name <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="名前空間名の別名を宣言する名前空間エイリアス"><a href="013-names.html#名前空間名の別名を宣言する名前空間エイリアス" class="header-anchor">#</a> 名前空間名の別名を宣言する名前空間エイリアス</h3> <p>名前空間名には別名を付けることができる。これを名前空間エイリアスと呼ぶ。</p> <p>たとえば名前空間名が重複することを恐れるあまり、とても長い名前空間名を付けたライブラリがあるとする。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> very_long_name <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    very_long_name<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>この関数<code>f</code>を使うために毎回<code>very_long_name::f</code>と書くのは面倒だ。こういうときには名前空間エイリアスを使うとよい。名前空間エイリアスは名前空間名の別名を宣言できる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> 別名 <span class="token operator">=</span> 名前空間名 <span class="token punctuation">;</span>
</code></pre></div><p>使い方。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> very_long_name <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 名前空間エイリアス</span>
    <span class="token keyword">namespace</span> vln <span class="token operator">=</span> very_long_name <span class="token punctuation">;</span>
    <span class="token comment">// vlnはvery_long_nameのエイリアス</span>
    vln<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間エイリアスは元の名前空間名と同じように使える。意味も同じだ。</p> <p>名前空間エイリアスはネストされた名前空間にも使える。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> A<span class="token operator">::</span>B<span class="token operator">::</span>C <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">namespace</span> D <span class="token operator">=</span> A<span class="token operator">::</span>B<span class="token operator">::</span>C <span class="token punctuation">;</span>
    <span class="token comment">// DはA::B::Cのエイリアス</span>
    D<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間エイリアスを関数の中で宣言すると、その関数の中でだけ有効になる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> A <span class="token punctuation">{</span> <span class="token keyword">int</span> x <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Bの宣言</span>
    <span class="token keyword">namespace</span> B <span class="token operator">=</span> A <span class="token punctuation">;</span>
    <span class="token comment">// OK、Bは宣言されている</span>
    <span class="token keyword">return</span> B<span class="token operator">::</span>x <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// エラー、Bは宣言されていない</span>
    <span class="token keyword">return</span> B<span class="token operator">::</span>x <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間エイリアスを名前空間の中で宣言すると、宣言以降の名前空間内で有効になる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
    <span class="token keyword">namespace</span> A <span class="token punctuation">{</span> <span class="token keyword">int</span> x <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">namespace</span> B <span class="token operator">=</span> A <span class="token punctuation">;</span>

    <span class="token comment">// OK</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> B<span class="token operator">::</span>x <span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// OK</span>
    <span class="token keyword">int</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> B<span class="token operator">::</span>x <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token comment">// end namespace ns</span>

<span class="token comment">// エラー、Bは宣言されていない</span>
<span class="token keyword">int</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> B<span class="token operator">::</span>x <span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>グローバル名前空間は名前空間なので、名前空間エイリアスを宣言できる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> long_name_is_loooong <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> cat <span class="token operator">=</span> long_name_is_loooong <span class="token punctuation">;</span>
</code></pre></div><h3 id="名前空間名の指定を省略するusingディレクティブ"><a href="013-names.html#名前空間名の指定を省略するusingディレクティブ" class="header-anchor">#</a> 名前空間名の指定を省略するusingディレクティブ</h3> <p>名前空間は名前の衝突を防ぐ機能だが、名前空間名をわざわざ指定するのは面倒だ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// std名前空間のstring</span>
    std<span class="token operator">::</span>string s <span class="token punctuation">;</span>
    <span class="token comment">// std名前空間のvector&lt;int&gt;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v <span class="token punctuation">;</span>

    <span class="token comment">// std名前空間のcout</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token number">123</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>もし自分のソースファイルが<code>string</code>, <code>vector&lt;int&gt;</code>, <code>cout</code>、その他<code>std</code>名前空間で使われる名前をいっさい使っていない場合、名前の衝突は発生しないことになる。その場合でも名前空間名を指定しなければならないのは面倒だ。</p> <p>C++では指定した名前空間を省略できる機能が存在する。<code>using</code>ディレクティブだ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">using</span> <span class="token keyword">namespace</span> 名前空間名 <span class="token punctuation">;</span>
</code></pre></div><p>これを使えば、先ほどのコードは以下のように書ける。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token keyword">namespace</span> std <span class="token punctuation">;</span>
    <span class="token comment">// std名前空間のstring</span>
    string s <span class="token punctuation">;</span>
    <span class="token comment">// std名前空間のvector&lt;int&gt;</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v <span class="token punctuation">;</span>

    <span class="token comment">// std名前空間のcout</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token number">123</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>では名前が衝突した場合はどうなるのか。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> abc <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token keyword">namespace</span> abc <span class="token punctuation">;</span>

    <span class="token comment">// エラー、名前が曖昧</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前<code>f</code>に対してどの名前を使用するのか曖昧になってエラーになる。このエラーを回避するためには、名前空間を直接指定する。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> abc <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token keyword">namespace</span> abc <span class="token punctuation">;</span>

    <span class="token comment">// OK、名前空間abcのf</span>
    abc<span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

    <span class="token comment">// OK、グローバル名前空間のf</span>
    <span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>using</code>ディレクティブは関数の中だけではなく、名前空間の中にも書ける。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> A <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> B <span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token keyword">namespace</span> A <span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// OK、A::f</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間の中に<code>using</code>ディレクティブを書くと、その名前空間の中では指定した名前空間を省略できる。</p> <p>グローバル名前空間は名前空間なので<code>using</code>ディレクティブが書ける。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">using</span> <span class="token keyword">namespace</span> std <span class="token punctuation">;</span>
</code></pre></div><p>ただし、グローバル名前空間の中に<code>using</code>ディレクティブを書くと、それ以降すべての箇所で指定した名前空間の省略ができてしまうので注意が必要だ。</p> <h3 id="名前空間を指定しなくてもよいinline名前空間"><a href="013-names.html#名前空間を指定しなくてもよいinline名前空間" class="header-anchor">#</a> 名前空間を指定しなくてもよいinline名前空間</h3> <p><code>inline名前空間</code>は<code>inline namespace</code>で定義する。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">inline</span> <span class="token keyword">namespace</span> name <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p><code>inline</code>名前空間内の名前は名前空間名を指定して使うこともできるし、名前空間を指定せずとも使うことができる。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">inline</span> <span class="token keyword">namespace</span> A <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> B <span class="token punctuation">{</span>
    <span class="token keyword">int</span> b <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>     <span class="token comment">// A::a</span>
    A<span class="token operator">::</span>a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>  <span class="token comment">// A::a</span>

    b <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>     <span class="token comment">// エラー、名前bは宣言されていない</span>
    B<span class="token operator">::</span>b <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>  <span class="token comment">// B::b</span>
<span class="token punctuation">}</span>
</code></pre></div><p>読者が<code>inline</code>名前空間を使うことはほとんどないだろうが、ライブラリのソースファイルを読むときには出てくるだろう。</p> <h2 id="型名"><a href="013-names.html#型名" class="header-anchor">#</a> 型名</h2> <p>型名とは型を表す名前だ。</p> <p>型名は<code>int</code>や<code>double</code>のように言語組み込みのキーワードを使うこともあれば、独自に作った型名を使うこともある。この独自に作った型名を専門用語ではユーザー定義された型(user-defined type)という。ユーザー定義された型を作る方法はさまざまだ。具体的に説明するのは本書のだいぶあとの方になるだろう。例としては、<code>std::string</code>や<code>std::vector&lt;T&gt;</code>がある。標準ライブラリによってユーザー定義された型だ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 組み込みの型名</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token number">0.0</span> <span class="token punctuation">;</span>

<span class="token comment">// ユーザー定義された型名</span>
std<span class="token operator">::</span>string s <span class="token punctuation">;</span>
std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v <span class="token punctuation">;</span>
</code></pre></div><h3 id="型名の別名を宣言するエイリアス宣言"><a href="013-names.html#型名の別名を宣言するエイリアス宣言" class="header-anchor">#</a> 型名の別名を宣言するエイリアス宣言</h3> <p>長い名前空間名を書くのが煩わしいように、長い型名を書くのも煩わしい。名前空間名の別名を宣言できるように、型名も別名を宣言できる。</p> <p>型名の別名を宣言するにはエイリアス宣言を使う。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">using</span> 別名 <span class="token operator">=</span> 型名 <span class="token punctuation">;</span>
</code></pre></div><p>使い方。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// エイリアス宣言</span>
    <span class="token keyword">using</span> Number <span class="token operator">=</span> <span class="token keyword">int</span> <span class="token punctuation">;</span>

    <span class="token comment">// Numberはintの別名</span>
    Number x <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>型名の別名は型名と同じように使える。意味も同じだ。</p> <p>歴史的な経緯により、エイリアス宣言による型名の別名のことを、<code>typedef名</code>(typedef name)という。これは<code>typedef</code>名を宣言する文法が、かつては<code>typedef</code>キーワードを使ったものだったからだ。<code>typedef</code>キーワードを使った<code>typedef</code>名の宣言方法は、昔のコードによく出てくるので現代でも覚えておく必要はある。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">typedef</span> 型名 <span class="token keyword">typedef</span>名 <span class="token punctuation">;</span>
</code></pre></div><p>使い方。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// typedef名による型名の宣言</span>
    <span class="token keyword">typedef</span> <span class="token keyword">int</span> Number <span class="token punctuation">;</span>

    Number x <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>これは変数の宣言と同じ文法だ。変数の宣言が以下のような文法で、</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>型名 変数名 <span class="token punctuation">;</span>
</code></pre></div><p>これに<code>typedef</code>キーワードを使えば<code>typedef</code>名の宣言になる。</p> <p>しかし<code>typedef</code>キーワードによる<code>typedef</code>名の宣言はわなが多い。例えば熟練のC++プログラマーでも、以下のコードが合法だということに驚くだろう。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token keyword">typedef</span> Number <span class="token punctuation">;</span>
    Number x <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>しかし本書ではまだ教えていない複雑な型名について、このようなコードを書こうとするとコンパイルエラーになることに熟練のC++プログラマーは気が付くはずだ。その理由はとても難しい。</p> <p>エイリアス宣言にはこのようなわなはない。</p> <h2 id="スコープ"><a href="013-names.html#スコープ" class="header-anchor">#</a> スコープ</h2> <p>スコープ(scope)というのはやや説明が難しい概念だ。名前空間や関数はスコープを持っている。とてもおおざっぱに説明するとカーリブラケット<code>{}</code>で囲まれた範囲がスコープだ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns
<span class="token punctuation">{</span> <span class="token comment">// 名前空間スコープの始まり</span>
<span class="token punctuation">}</span> <span class="token comment">// 名前空間スコープの終わり</span>

<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token comment">// 関数スコープの始まり</span>

<span class="token punctuation">}</span> <span class="token comment">// 関数スコープの終わり</span>
</code></pre></div><p>これとは別にブロック文のスコープもある。ブロックとは関数の中で複数の文を束ねて1つの文として扱う機能だ。覚えているだろうか。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token comment">// 関数スコープ</span>

    <span class="token punctuation">{</span> <span class="token comment">// 外側のブロックスコープ</span>
        <span class="token punctuation">{</span> <span class="token comment">// 内側のブロックスコープ</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>スコープは<code>{</code>に始まり<code>}</code>に終わる。</p> <p>なぜスコープという概念について説明したかというと、宣言された名前が有効な範囲は、宣言された最も内側のスコープの範囲だからだ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">namespace</span> ns
<span class="token punctuation">{</span><span class="token comment">// aの所属するスコープ</span>
    <span class="token keyword">int</span> a <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">// bの所属するスコープ</span>
        <span class="token keyword">int</span> b <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>

        <span class="token punctuation">{</span> <span class="token comment">// cの所属するスコープ</span>
            <span class="token keyword">int</span> c <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token comment">// cの範囲終わり</span>

        
    <span class="token punctuation">}</span><span class="token comment">// bの範囲終わり</span>

<span class="token punctuation">}</span> <span class="token comment">// aの範囲終わり</span>
</code></pre></div><p>名前が有効な範囲は、宣言された最も内側のスコープだ。</p> <p>外側のスコープで宣言された名前は内側のスコープで使える。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
    <span class="token punctuation">{</span><span class="token comment">// 新たなスコープ</span>
        a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>その逆はできない。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span> <span class="token keyword">int</span> a <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// エラー</span>
    a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間も同じだ。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// グローバル名前空間スコープ</span>

<span class="token keyword">namespace</span> ns <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token comment">// OK</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token comment">// 名前空間nsのスコープの終了</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// エラー</span>
    a <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
    <span class="token comment">// OK </span>
    ns<span class="token operator">::</span>a <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>名前空間スコープと関数スコープには違う点もあるが、名前の有効な範囲としては同じスコープだ。</p> <p>外側のスコープで宣言された名前と同じ名前を内側で宣言すると、内側の名前が外側の名前を隠す。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// グローバル名前空間のf</span>
<span class="token keyword">auto</span> f <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 1</span>

    <span class="token comment">// 関数mainのf</span>
    <span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>

    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 2</span>

    <span class="token punctuation">{</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 2</span>

        <span class="token comment">// ブロックのf</span>
        <span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token number">3</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 3</span>
    <span class="token punctuation">}</span>

    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre></div><p>宣言されている場所に注意が必要だ。名前<code>f</code>は3つある。最初の関数呼び出しの時点ではグローバル名前空間の<code>f</code>が呼ばれる。まだ名前<code>f</code>は関数<code>main</code>の中で宣言されていないからだ。そして関数<code>main</code>のスコープの中で名前<code>f</code>が宣言される。このときグローバル名前空間の<code>f</code>は隠される。そのため、次の関数<code>f</code>の呼び出しでは関数<code>main</code>の<code>f</code>が呼ばれる。次にブロックの中に入る。ここで関数<code>f</code>が呼ばれるが、まだこの<code>f</code>は関数<code>main</code>の<code>f</code>だ。そのあとにブロックの中で名前<code>f</code>が宣言される。すると次の関数<code>f</code>の呼び出しはブロックの<code>f</code>だ。ブロックから抜けたあとの関数<code>f</code>の呼び出しは関数<code>main</code>の<code>f</code>だ。</p> <p>この章では名前について解説した。名前は難しい。難しいが、プログラミングにおいては名前と向き合わなければならない。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="012-floating-point.html" class="prev">浮動小数点数</a></span> <span class="next"><a href="014-iterator.html">イテレーターの基礎</a>
      →
    </span></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="assets/js/app.8620998f.js" defer></script><script src="assets/js/2.7009e9ba.js" defer></script><script src="assets/js/18.468131c1.js" defer></script>
  </body>
</html>
